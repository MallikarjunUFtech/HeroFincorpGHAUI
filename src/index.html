<!DOCTYPE html>
<html>
<head>
    <base href="/" />
    <title>::Bharti AXA Group Health Assure::</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- bootstrap css -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" />
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.4-build.3588/angular.min.js"></script>
     <!--  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>  -->
     <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
 <link href="https://buyuat.bharti-axagi.co.in/group_loan_tap/css/bootstrapoverride.css" rel="stylesheet" type="text/css" />
  <script src="https://buyuat.bharti-axagi.co.in/group_loan_tap/assets/js/bootstrapverride.js"></script>
<script type="text/javascript">
    $(function(){
    $( ".policy-start-date" ).datepicker({
              format: 'dd-mm-yyyy',
                changeMonth: true,
                changeYear: true,
                todayHighlight: true,
                autoclose: true,
                startDate: "today",
                endDate  : new Date(Date.now() + 60 * 24*60*60*1000)
   }).change(validateAge).on('changeDate', validateAge);
    $( ".custom-date-dob" ).datepicker({
                changeMonth: true,
                changeYear: true,
                todayHighlight: true,
                orientation: "auto left",
                autoclose: true,
                endDate  : '-91d',
                startDate: "-50y"
  
}).change(nomineeDOB).on('changeDate', nomineeDOB);




       $( ".nominee-date-dob" ).datepicker({
                changeMonth: true,
                changeYear: true,
                todayHighlight: true,
                orientation: "auto left",
                autoclose: true,
                endDate  : new Date(Date.now() - 1 * 24*60*60*1000)
   }).change(nomineeDOB).on('changeDate', nomineeDOB);;

  });

    function nomineeDOB(ev) {
ev.stopImmediatePropagation();
if($(this).val() != '')
{
    $(this).removeClass('is-invalid');
}
}

function dateChanged(ev) {
ev.stopImmediatePropagation();
if($(this).val() != '')
{
    $(this).removeClass('is-invalid');
}
    getAge($(this).val())
}

function getAge(dateString) {
    var today = new Date();
    var birthDate = new Date(dateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
     sessionStorage.setItem('age',age)
    return age;
}


function validateAge(e)

{
  e.stopImmediatePropagation();
    $(this).removeClass('is-invalid');
try{
  
      var date2String = $(this).val();
      var selectedDate = date2String.toString();
      var splitdate = selectedDate.split('-');
      var yearThen = parseInt(splitdate[2]);
      var monthThen = parseInt(splitdate[1]);
      var dayThen = parseInt(splitdate[0]);
      var date =new Date(yearThen, monthThen, dayThen);
      date.setDate(date.getDate() +364.25);
      var day = date.getDate();
      var month = date.getMonth(); 
      var year = date.getFullYear(); 
     if(( monthThen ==2 || monthThen ==4 ||monthThen ==6 || monthThen ==8 ||monthThen ==9  ||monthThen ==11) && dayThen==1){
        day =31;
      } else if(( monthThen ==3 ||monthThen ==5 || monthThen ==7 ||monthThen ==10 || monthThen ==12) && dayThen==1){
        if(monthThen ==3){
          if(year/4 == 0){
            day = 29;
          }
          else{
            day = 28;
          }
        }

        else{
            day =30;
        }
        
      }

      if(month == 0){
        month =12;

      }

      if(month == 12){
        year =year-1;;

      }

     
      var dateStr = day + "-" + month + "-" + year;
      $('#gha_policy_end_date').val(dateStr);

    }
          catch(Error){
   
    alert("Error Message IN Proposal date "+Error.message);
  }

}



</script>
</head>
<body>
    <app>Loading...</app>
</body>
</html>
